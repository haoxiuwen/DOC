# 聊天室概述

<Toc />

## 功能描述

聊天室是支持多人加入的类似 Twitch 的组织，聊天室中的成员没有固定关系，一旦离线后，不会收到聊天室中的任何消息，（除了聊天室白名单中的成员）超过 2 分钟会自动退出聊天室。聊天室可以应用于直播、消息广播等。若需调整该时间，需联系环信商务经理。

### 聊天室成员角色  

| 聊天室成员角色<div style="width: 100px;"></div> | 描述<div style="width: 384px;"></div> | 管理权限 |
| :------ | :-------------- | :------------ |
| 普通成员   | 不具备管理权限的普通成员。 | 普通成员可以：<br/> - 在聊天室内发送和接收消息；<br/> - 获取聊天室详情；<br/> - 退出聊天室；<br/> - 获取聊天室公告；<br/> - 获取聊天室成员列表；<br/> - 设置和删除自定义属性（key-value）；<br/> - 获取聊天室自定义属性。|
| 聊天室管理员   | 由聊天室所有者指定，协助聊天室所有者进行管理，拥有一定的管理权限。 | 除了普通成员的权限，管理员还具备以下权限：<br/> - 修改聊天室名称和聊天室描述；<br/> - 更新聊天室公告；<br/> - 将成员被移出聊天室；<br/> - 管理聊天室白名单；<br/> - 管理聊天室黑名单；<br/> - 管理聊天室禁言列表；<br/> - 开启和关闭聊天室全员禁言。 |
| 聊天室所有者       | 聊天室的创建者默认成为聊天室所有者，在聊天室中拥有最高权限。 | 除了管理员权限，聊天室所有者还具备以下权限：<br/> - 添加和移除管理员；<br/> - 解散聊天室；<br/> - 变更聊天室所有者。 |

:::tip
仅聊天室超级管理员具有在客户端创建聊天室的权限。环信即时通讯 IM 提供多个管理超级管理员的 REST 接口，包括获取、添加、撤销等操作。
:::

### 群组与聊天室的区别

群组和聊天室均为支持多人沟通的即时通讯系统。两者的区别在于，群组中的成员会有固定的强的关系，成员加入后会长时间的在群组中。聊天室中的成员没有固定关系，类似与一个开放的空间，用户可以自由加入，离开即退出聊天室。

详见[群组概述](group_overview.html)。

## 功能列表

### 创建和管理聊天室

| 功能           | 描述                                                         |
| :------------- | :----------------------------------------------------------- |
| 创建聊天室     | 只有被赋予 [超级管理员](/document/server-side/chatroom.html#管理超级管理员) 权限的用户有权限创建聊天室。建议[调用 REST 接口创建聊天室](/document/server-side/chatroom_manage.html#创建聊天室)，设置聊天室名称、聊天室描述、聊天室成员最大人数（包括管理员）、聊天室管理员和普通成员以及聊天室扩展信息。 |
| 加入聊天室     | 没有被加入黑名单的所有 app 用户可自由加入聊天室。                                   |
| 离开聊天室     | 所有聊天室成员都可以自由退出聊天室；也可能被动离开聊天室，原因分为：被管理员移出聊天室、聊天室解散和用户账号离线。<br/> 与群主无法退出群组不同，聊天室所有者可以离开聊天室，重新进入聊天室仍是该聊天室的所有者。初始化时可以设置是否允许聊天室所有者离开聊天室。<br/> 退出聊天室时，SDK 默认删除该聊天室所有本地消息。若要保留这些消息，可在 SDK 初始化时进行设置。  |
| 解散聊天室     | 需要聊天室所有者权限。                                       |
| 获取聊天室详情 | 所有聊天室成员有权限获取聊天室详情，包括聊天室 ID、聊天室名称，聊天室描述、最大成员数、聊天室所有者、是否全员禁言以及聊天室角色类型。聊天室公告、管理员列表、成员列表、黑名单列表、禁言列表需单独调用接口获取。        |
| 实时更新聊天室成员人数 | 如果聊天室短时间内有成员频繁加入或退出时，可以实现实时更新聊天室成员人数。|

### 聊天室成员管理

| 功能               | 描述                                                         |
| :----------------- | :----------------------------------------------------------- |
| 获取聊天室成员列表     | 所有聊天室成员均可获取当前聊天室成员列表。   |
| 变更聊天室所有者       | 聊天室所有者可以将聊天室的所有权转让给指定的聊天室成员。所有权转移后，聊天室所有者成为聊天室的普通成员。   |
| 聊天室禁言列表         | 需要聊天室所有者或管理员权限，可以对单个聊天室成员进行禁言。   |
| 聊天室全员禁言         | 需要聊天室所有者或管理员权限。全员禁言时，默认聊天室所有者和管理员不禁言。 |
| 聊天室白名单           | 需要聊天室所有者或管理员权限。全员禁言时，白名单的成员可以发消息。        |
| 聊天室黑名单           | 需要聊天室所有者或管理员权限，被加入黑名单的成员会被移出聊天室。黑名单中的成员需要聊天室所有者主动从黑名单移除后才能再次加入聊天室。    |
| 管理聊天室管理员       | 仅聊天室所有者可以对成员指定或移除管理员权限。          |

### 聊天室属性管理

| 修改聊天室名称 | 需要聊天室所有者权限。                   |
| 获取/更新聊天室公告     | 仅聊天室所有者有权限更新公告、删除公告。<br/>公告更新会通过监听同步给所有成员。 |
| 管理聊天室自定义属性（key-value）     | 设置、获取和删除以及强制设置和强制删除聊天室自定义属性。 |

### 监听聊天室事件

你可以实现聊天室事件监听，聊天室内进行了相关操作，例如，有新成员加入聊天室、退出聊天室、被添加到禁言列表、黑名单列表等，聊天室中的其他人员会收到相关事件，详见[监听聊天室事件](/document/android/room_manage.html#监听聊天室事件)。

## 聊天室事件回调

你可以实现发送后回调，使环信 IM 服务器将聊天室事件同步给你的应用服务器。若聊天室内发生新成员加入、退出、被添加到禁言列表、黑名单列表等相关操作时，环信 IM 服务器向应用服务器发起 HTTP/HTTPS POST 请求，同步所发生的事件，详见[聊天室事件回调文档](/document/server-side/callback_configurations.html#聊天室)。

## 聊天室限制

聊天室相关限制，包括聊天室成员数量、基本属性和自定义属性的相关限制，详见[聊天室限制](/product/limitation.html#聊天室)文档。